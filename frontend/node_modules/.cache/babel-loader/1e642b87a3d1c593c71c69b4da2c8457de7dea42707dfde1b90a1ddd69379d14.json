{"ast":null,"code":"import{useState,useEffect}from\"react\";import{Navigate}from\"react-router-dom\";import{useCoursesContextHook}from\"../context/hooks/useContextHook\";import{useAuthorizeContextHook}from\"../context/hooks/useContextHook\";import{useGlobalRoleContextHook}from\"../context/hooks/useContextHook\";import LoginPage from\"./loginPage\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ManageCourses=()=>{const{authorize,authorizeDispatch}=useAuthorizeContextHook();const{allCourses,courseDispatch}=useCoursesContextHook();const[title,setTitle]=useState(\"\");const[description,setDescription]=useState(\"\");const[department,setDepartment]=useState(\"\");const[error,setError]=useState(null);const[allDepartments,setAllDepartments]=useState([]);useEffect(()=>{const fetchDepartments=async()=>{const response=await fetch(\"/api/departments\");const json=await response.json();if(response.ok){setAllDepartments(json);}else{console.error(\"Error fetching departments:\",json.error);}};fetchDepartments();const fetchCourses=async()=>{const response=await fetch(\"/api/courses\");const json=await response.json();if(response.ok){courseDispatch({type:\"SET_COURSES\",payload:json});}};fetchCourses();},[]);const addCourseToDb=async e=>{e.preventDefault();const newCourse={title,description,department};const response=await fetch(\"/api/courses\",{method:\"POST\",body:JSON.stringify(newCourse),headers:{\"Content-Type\":\"application/json\"}});const json=await response.json();if(!response.ok){setError(json.error);}if(response.ok){setTitle(\"\");setDescription(\"\");setDepartment(\"\");setError(null);courseDispatch({type:\"CREATE_COURSE\",payload:json});}};const handleDeleteCourse=async courseId=>{const response=await fetch(\"/api/courses/\".concat(courseId),{method:\"DELETE\"});const json=await response.json();if(response.ok){courseDispatch({type:\"DELETE_COURSE\",payload:json});}if(!response.ok){setError(json.error);}};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Add Courses\"}),/*#__PURE__*/_jsx(\"div\",{className:\"form\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:addCourseToDb,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Course title\",onChange:e=>setTitle(e.target.value),value:title}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Course description\",onChange:e=>setDescription(e.target.value),value:description}),/*#__PURE__*/_jsxs(\"select\",{onChange:e=>setDepartment(e.target.value),value:department,children:[/*#__PURE__*/_jsx(\"option\",{children:\"Select the department\"}),allDepartments&&allDepartments.map(department=>/*#__PURE__*/_jsx(\"option\",{value:department._id,children:department.title},department._id))]}),/*#__PURE__*/_jsx(\"button\",{children:\"Submit\"})]})}),/*#__PURE__*/_jsx(\"h2\",{children:\"Courses\"}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Course\"}),/*#__PURE__*/_jsx(\"td\",{children:\"Course Description\"}),/*#__PURE__*/_jsx(\"td\",{children:\"Department\"}),/*#__PURE__*/_jsx(\"td\",{children:\"Remove\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:allCourses&&allCourses.map(course=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:course.title}),/*#__PURE__*/_jsx(\"td\",{children:course.description}),/*#__PURE__*/_jsx(\"td\",{children:course.department.title}),/*#__PURE__*/_jsx(\"td\",{className:\"deleteCourse\",onClick:()=>handleDeleteCourse(course._id),children:\"Remove\"})]},course._id))})]}),\" \"]})});};export default ManageCourses;","map":{"version":3,"names":["useState","useEffect","Navigate","useCoursesContextHook","useAuthorizeContextHook","useGlobalRoleContextHook","LoginPage","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ManageCourses","authorize","authorizeDispatch","allCourses","courseDispatch","title","setTitle","description","setDescription","department","setDepartment","error","setError","allDepartments","setAllDepartments","fetchDepartments","response","fetch","json","ok","console","fetchCourses","type","payload","addCourseToDb","e","preventDefault","newCourse","method","body","JSON","stringify","headers","handleDeleteCourse","courseId","concat","children","className","onSubmit","placeholder","onChange","target","value","map","_id","course","onClick"],"sources":["C:/Users/chernysn/Documents/GITHUB_COPIES/MERN_school_dashboard/frontend/src/pages/manageCourses.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { Navigate } from \"react-router-dom\";\r\nimport { useCoursesContextHook } from \"../context/hooks/useContextHook\";\r\nimport { useAuthorizeContextHook } from \"../context/hooks/useContextHook\";\r\nimport { useGlobalRoleContextHook } from \"../context/hooks/useContextHook\";\r\nimport LoginPage from \"./loginPage\";\r\n\r\nconst ManageCourses = () => {\r\n  const { authorize, authorizeDispatch } = useAuthorizeContextHook();\r\n  const { allCourses, courseDispatch } = useCoursesContextHook();\r\n  const [title, setTitle] = useState(\"\");\r\n  const [description, setDescription] = useState(\"\");\r\n  const [department, setDepartment] = useState(\"\");\r\n  const [error, setError] = useState(null);\r\n  const [allDepartments, setAllDepartments] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const fetchDepartments = async () => {\r\n      const response = await fetch(\"/api/departments\");\r\n      const json = await response.json();\r\n\r\n      if (response.ok) {\r\n        setAllDepartments(json);\r\n      } else {\r\n        console.error(\"Error fetching departments:\", json.error);\r\n      }\r\n    };\r\n\r\n    fetchDepartments();\r\n\r\n    const fetchCourses = async () => {\r\n      const response = await fetch(\"/api/courses\");\r\n      const json = await response.json();\r\n\r\n      if (response.ok) {\r\n        courseDispatch({ type: \"SET_COURSES\", payload: json });\r\n      }\r\n    };\r\n\r\n    fetchCourses();\r\n  }, []);\r\n\r\n  const addCourseToDb = async (e) => {\r\n    e.preventDefault();\r\n    const newCourse = { title, description, department };\r\n\r\n    const response = await fetch(\"/api/courses\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify(newCourse),\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n    });\r\n\r\n    const json = await response.json();\r\n\r\n    if (!response.ok) {\r\n      setError(json.error);\r\n    }\r\n\r\n    if (response.ok) {\r\n      setTitle(\"\");\r\n      setDescription(\"\");\r\n      setDepartment(\"\");\r\n      setError(null);\r\n      courseDispatch({ type: \"CREATE_COURSE\", payload: json });\r\n    }\r\n  };\r\n\r\n  const handleDeleteCourse = async (courseId) => {\r\n    const response = await fetch(`/api/courses/${courseId}`, {\r\n      method: \"DELETE\",\r\n    });\r\n    const json = await response.json();\r\n\r\n    if (response.ok) {\r\n      courseDispatch({ type: \"DELETE_COURSE\", payload: json });\r\n    }\r\n\r\n    if (!response.ok) {\r\n      setError(json.error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"container\">\r\n        <h2>Add Courses</h2>\r\n        <div className=\"form\">\r\n          <form onSubmit={addCourseToDb}>\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Course title\"\r\n              onChange={(e) => setTitle(e.target.value)}\r\n              value={title}\r\n            />\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Course description\"\r\n              onChange={(e) => setDescription(e.target.value)}\r\n              value={description}\r\n            />\r\n            <select\r\n              onChange={(e) => setDepartment(e.target.value)}\r\n              value={department}\r\n            >\r\n              <option>Select the department</option>\r\n              {allDepartments &&\r\n                allDepartments.map((department) => (\r\n                  <option key={department._id} value={department._id}>\r\n                    {department.title}\r\n                  </option>\r\n                ))}\r\n            </select>\r\n            <button>Submit</button>\r\n          </form>\r\n        </div>\r\n        <h2>Courses</h2>\r\n        <table>\r\n          <thead>\r\n            <tr>\r\n              <td>Course</td>\r\n              <td>Course Description</td>\r\n              <td>Department</td>\r\n              <td>Remove</td>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {allCourses &&\r\n              allCourses.map((course) => (\r\n                <tr key={course._id}>\r\n                  <td>{course.title}</td>\r\n                  <td>{course.description}</td>\r\n                  <td>{course.department.title}</td>\r\n                  <td\r\n                    className=\"deleteCourse\"\r\n                    onClick={() => handleDeleteCourse(course._id)}\r\n                  >\r\n                    Remove\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n          </tbody>\r\n        </table>{\" \"}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ManageCourses;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
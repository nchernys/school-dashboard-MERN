{"ast":null,"code":"import{useEffect,useState,useRef}from\"react\";import{Navigate}from\"react-router-dom\";import AddStudentForm from\"../components/addStudentForm\";import LoginPage from\"./loginPage\";import PopupUpdateStudent from\"../components/popupUpdateStudent\";import{useStudentsContextHook}from\"../context/hooks/useContextHook\";import{useAuthorizeContextHook}from\"../context/hooks/useContextHook\";import{useGlobalRoleContextHook}from\"../context/hooks/useContextHook\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Home=()=>{const{authorize,authorizeDispatch}=useAuthorizeContextHook();const{students,studentDispatch}=useStudentsContextHook();const[name,setName]=useState(\"\");const[major,setMajor]=useState(\"\");const[year,setYear]=useState(\"\");const[error,setError]=useState(null);const[showPopup,setShowPopup]=useState(false);const[thisStudentId,setThisStudentId]=useState(\"\");const[studentToUpdate,setStudentToUpdate]=useState(\"\");useEffect(()=>{const fetchStudents=async()=>{const response=await fetch(\"/api/students\");const json=await response.json();if(response.ok){studentDispatch({type:\"SET_STUDENTS\",payload:json});}else{console.error(\"Error fetching departments:\",json.error);}};fetchStudents();},[studentDispatch]);const handleDeleteStudent=async studentId=>{setThisStudentId(studentId);const response=await fetch(\"/api/students/\".concat(studentId),{method:\"DELETE\"});const json=await response.json();if(response.ok){studentDispatch({type:\"DELETE_STUDENT\",payload:json});}else{console.error(\"Error fetching departments:\",json.error);}};const handleUpdateStudent=async studentId=>{setShowPopup(true);const studentToUpdate=students.find(student=>student._id===studentId);setStudentToUpdate(studentToUpdate);};const handlePopupHide=()=>{setShowPopup(false);};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Students\"}),/*#__PURE__*/_jsx(\"div\",{className:\"forms\",children:/*#__PURE__*/_jsx(AddStudentForm,{studentDispatch:studentDispatch,setName:setName,setYear:setYear,setMajor:setMajor,name:name,year:year,major:major})}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(PopupUpdateStudent,{students:students,studentDispatch:studentDispatch,handlePopupHide:handlePopupHide,studentToUpdate:studentToUpdate,setStudentToUpdate:setStudentToUpdate,showPopup:showPopup,setShowPopup:setShowPopup,setName:setName,setYear:setYear,setMajor:setMajor,name:name,year:year,major:major}),/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"td\",{children:\"Major\"}),/*#__PURE__*/_jsx(\"td\",{children:\"Courses\"}),/*#__PURE__*/_jsx(\"td\",{children:\"Update\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:students&&students.map(student=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:student.name}),\" \",/*#__PURE__*/_jsxs(\"td\",{children:[\" \",student.major,\" \"]}),/*#__PURE__*/_jsx(\"td\",{children:student.courses.map(course=>/*#__PURE__*/_jsxs(\"div\",{children:[\" \",course.title,\" \"]},course._id))}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsxs(\"span\",{className:\"update-student\",onClick:()=>handleUpdateStudent(student._id),children:[\"Update\",\" \"]}),\"|\",/*#__PURE__*/_jsxs(\"span\",{className:\"delete-student\",onClick:()=>handleDeleteStudent(student._id),children:[\" \",\"Delete\"]}),/*#__PURE__*/_jsx(\"br\",{})]})]},student._id))})]})]})});};export default Home;","map":{"version":3,"names":["useEffect","useState","useRef","Navigate","AddStudentForm","LoginPage","PopupUpdateStudent","useStudentsContextHook","useAuthorizeContextHook","useGlobalRoleContextHook","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Home","authorize","authorizeDispatch","students","studentDispatch","name","setName","major","setMajor","year","setYear","error","setError","showPopup","setShowPopup","thisStudentId","setThisStudentId","studentToUpdate","setStudentToUpdate","fetchStudents","response","fetch","json","ok","type","payload","console","handleDeleteStudent","studentId","concat","method","handleUpdateStudent","find","student","_id","handlePopupHide","children","className","map","courses","course","title","onClick"],"sources":["C:/Users/chernysn/Documents/GITHUB_COPIES/MERN_school_dashboard/src/pages/Home.js"],"sourcesContent":["import { useEffect, useState, useRef } from \"react\";\r\nimport { Navigate } from \"react-router-dom\";\r\nimport AddStudentForm from \"../components/addStudentForm\";\r\nimport LoginPage from \"./loginPage\";\r\nimport PopupUpdateStudent from \"../components/popupUpdateStudent\";\r\nimport { useStudentsContextHook } from \"../context/hooks/useContextHook\";\r\nimport { useAuthorizeContextHook } from \"../context/hooks/useContextHook\";\r\nimport { useGlobalRoleContextHook } from \"../context/hooks/useContextHook\";\r\n\r\nconst Home = () => {\r\n  const { authorize, authorizeDispatch } = useAuthorizeContextHook();\r\n  const { students, studentDispatch } = useStudentsContextHook();\r\n  const [name, setName] = useState(\"\");\r\n  const [major, setMajor] = useState(\"\");\r\n  const [year, setYear] = useState(\"\");\r\n  const [error, setError] = useState(null);\r\n  const [showPopup, setShowPopup] = useState(false);\r\n  const [thisStudentId, setThisStudentId] = useState(\"\");\r\n  const [studentToUpdate, setStudentToUpdate] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    const fetchStudents = async () => {\r\n      const response = await fetch(\"/api/students\");\r\n      const json = await response.json();\r\n\r\n      if (response.ok) {\r\n        studentDispatch({ type: \"SET_STUDENTS\", payload: json });\r\n      } else {\r\n        console.error(\"Error fetching departments:\", json.error);\r\n      }\r\n    };\r\n    fetchStudents();\r\n  }, [studentDispatch]);\r\n\r\n  const handleDeleteStudent = async (studentId) => {\r\n    setThisStudentId(studentId);\r\n    const response = await fetch(`/api/students/${studentId}`, {\r\n      method: \"DELETE\",\r\n    });\r\n    const json = await response.json();\r\n\r\n    if (response.ok) {\r\n      studentDispatch({ type: \"DELETE_STUDENT\", payload: json });\r\n    } else {\r\n      console.error(\"Error fetching departments:\", json.error);\r\n    }\r\n  };\r\n\r\n  const handleUpdateStudent = async (studentId) => {\r\n    setShowPopup(true);\r\n    const studentToUpdate = students.find(\r\n      (student) => student._id === studentId\r\n    );\r\n    setStudentToUpdate(studentToUpdate);\r\n  };\r\n\r\n  const handlePopupHide = () => {\r\n    setShowPopup(false);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"container\">\r\n        <h2>Students</h2>\r\n        <div className=\"forms\">\r\n          <AddStudentForm\r\n            studentDispatch={studentDispatch}\r\n            setName={setName}\r\n            setYear={setYear}\r\n            setMajor={setMajor}\r\n            name={name}\r\n            year={year}\r\n            major={major}\r\n          />\r\n        </div>\r\n        <table>\r\n          <PopupUpdateStudent\r\n            students={students}\r\n            studentDispatch={studentDispatch}\r\n            handlePopupHide={handlePopupHide}\r\n            studentToUpdate={studentToUpdate}\r\n            setStudentToUpdate={setStudentToUpdate}\r\n            showPopup={showPopup}\r\n            setShowPopup={setShowPopup}\r\n            setName={setName}\r\n            setYear={setYear}\r\n            setMajor={setMajor}\r\n            name={name}\r\n            year={year}\r\n            major={major}\r\n          />\r\n          <thead>\r\n            <tr>\r\n              <td>Name</td>\r\n              <td>Major</td>\r\n              <td>Courses</td>\r\n              <td>Update</td>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {students &&\r\n              students.map((student) => (\r\n                <tr key={student._id}>\r\n                  <td>{student.name}</td> <td> {student.major} </td>\r\n                  <td>\r\n                    {student.courses.map((course) => (\r\n                      <div key={course._id}> {course.title} </div>\r\n                    ))}\r\n                  </td>\r\n                  <td>\r\n                    <span\r\n                      className=\"update-student\"\r\n                      onClick={() => handleUpdateStudent(student._id)}\r\n                    >\r\n                      Update{\" \"}\r\n                    </span>\r\n                    |\r\n                    <span\r\n                      className=\"delete-student\"\r\n                      onClick={() => handleDeleteStudent(student._id)}\r\n                    >\r\n                      {\" \"}\r\n                      Delete\r\n                    </span>\r\n                    <br />\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
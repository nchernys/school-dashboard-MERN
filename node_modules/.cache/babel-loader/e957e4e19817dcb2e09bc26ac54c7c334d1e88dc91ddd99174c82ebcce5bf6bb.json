{"ast":null,"code":"import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PopupAddCourseToStudent=_ref=>{let{showAdd,allCourses,thisStudent,setCourseToViewAddDelete,setShowAdd,setError,handlePopupHide,studentDispatch}=_ref;const handleLinkCourseToStudent=async courseId=>{setCourseToViewAddDelete(courseId);const studentId=thisStudent._id;const studentCourse={courseId};const response=await fetch(\"/api/students/addcourse/\".concat(studentId),{method:\"PATCH\",body:JSON.stringify(studentCourse),headers:{\"Content-Type\":\"application/json\"}});const json=await response.json();if(!response.ok){setError(\"THIS IS ERROR\",json.error);}else{setError(null);setShowAdd(false);const course=allCourses.find(course=>course._id===courseId);studentDispatch({type:\"ADD_COURSE_STUDENT\",payload:{studentId,course}});}};return/*#__PURE__*/_jsxs(\"div\",{className:\"popup\",style:{display:showAdd?\"flex\":\"none\"},children:[/*#__PURE__*/_jsx(\"div\",{className:\"close\",onClick:handlePopupHide,children:\"close\"}),/*#__PURE__*/_jsxs(\"h2\",{children:[thisStudent.name,\":\"]}),/*#__PURE__*/_jsxs(\"select\",{name:\"courses\",id:\"courses\",onChange:e=>handleLinkCourseToStudent(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{children:\"Add a course:\"}),allCourses&&allCourses.map(course=>/*#__PURE__*/_jsx(\"option\",{value:course._id,children:course.title},course._id))]})]});};export default PopupAddCourseToStudent;","map":{"version":3,"names":["PopupAddCourseToStudent","_ref","showAdd","allCourses","thisStudent","setCourseToViewAddDelete","setShowAdd","setError","handlePopupHide","studentDispatch","handleLinkCourseToStudent","courseId","studentId","_id","studentCourse","response","fetch","concat","method","body","JSON","stringify","headers","json","ok","error","course","find","type","payload","_jsxs","className","style","display","children","_jsx","onClick","name","id","onChange","e","target","value","map","title"],"sources":["C:/Users/chernysn/Documents/GITHUB_COPIES/MERN_school_dashboard/frontend/src/components/popupAddCourseToStudent.js"],"sourcesContent":["const PopupAddCourseToStudent = ({\r\n  showAdd,\r\n  allCourses,\r\n  thisStudent,\r\n  setCourseToViewAddDelete,\r\n  setShowAdd,\r\n  setError,\r\n  handlePopupHide,\r\n  studentDispatch,\r\n}) => {\r\n  const handleLinkCourseToStudent = async (courseId) => {\r\n    setCourseToViewAddDelete(courseId);\r\n    const studentId = thisStudent._id;\r\n    const studentCourse = { courseId };\r\n\r\n    const response = await fetch(`/api/students/addcourse/${studentId}`, {\r\n      method: \"PATCH\",\r\n      body: JSON.stringify(studentCourse),\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n    });\r\n\r\n    const json = await response.json();\r\n\r\n    if (!response.ok) {\r\n      setError(\"THIS IS ERROR\", json.error);\r\n    } else {\r\n      setError(null);\r\n      setShowAdd(false);\r\n      const course = allCourses.find((course) => course._id === courseId);\r\n      studentDispatch({\r\n        type: \"ADD_COURSE_STUDENT\",\r\n        payload: { studentId, course },\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"popup\" style={{ display: showAdd ? \"flex\" : \"none\" }}>\r\n      <div className=\"close\" onClick={handlePopupHide}>\r\n        close\r\n      </div>\r\n      <h2>{thisStudent.name}:</h2>\r\n      <select\r\n        name=\"courses\"\r\n        id=\"courses\"\r\n        onChange={(e) => handleLinkCourseToStudent(e.target.value)}\r\n      >\r\n        <option>Add a course:</option>\r\n        {allCourses &&\r\n          allCourses.map((course) => (\r\n            <option key={course._id} value={course._id}>\r\n              {course.title}\r\n            </option>\r\n          ))}\r\n      </select>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PopupAddCourseToStudent;\r\n"],"mappings":"yDAAA,KAAM,CAAAA,uBAAuB,CAAGC,IAAA,EAS1B,IAT2B,CAC/BC,OAAO,CACPC,UAAU,CACVC,WAAW,CACXC,wBAAwB,CACxBC,UAAU,CACVC,QAAQ,CACRC,eAAe,CACfC,eACF,CAAC,CAAAR,IAAA,CACC,KAAM,CAAAS,yBAAyB,CAAG,KAAO,CAAAC,QAAQ,EAAK,CACpDN,wBAAwB,CAACM,QAAQ,CAAC,CAClC,KAAM,CAAAC,SAAS,CAAGR,WAAW,CAACS,GAAG,CACjC,KAAM,CAAAC,aAAa,CAAG,CAAEH,QAAS,CAAC,CAElC,KAAM,CAAAI,QAAQ,CAAG,KAAM,CAAAC,KAAK,4BAAAC,MAAA,CAA4BL,SAAS,EAAI,CACnEM,MAAM,CAAE,OAAO,CACfC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACP,aAAa,CAAC,CACnCQ,OAAO,CAAE,CAAE,cAAc,CAAE,kBAAmB,CAChD,CAAC,CAAC,CAEF,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAR,QAAQ,CAACQ,IAAI,CAAC,CAAC,CAElC,GAAI,CAACR,QAAQ,CAACS,EAAE,CAAE,CAChBjB,QAAQ,CAAC,eAAe,CAAEgB,IAAI,CAACE,KAAK,CAAC,CACvC,CAAC,IAAM,CACLlB,QAAQ,CAAC,IAAI,CAAC,CACdD,UAAU,CAAC,KAAK,CAAC,CACjB,KAAM,CAAAoB,MAAM,CAAGvB,UAAU,CAACwB,IAAI,CAAED,MAAM,EAAKA,MAAM,CAACb,GAAG,GAAKF,QAAQ,CAAC,CACnEF,eAAe,CAAC,CACdmB,IAAI,CAAE,oBAAoB,CAC1BC,OAAO,CAAE,CAAEjB,SAAS,CAAEc,MAAO,CAC/B,CAAC,CAAC,CACJ,CACF,CAAC,CAED,mBACEI,KAAA,QAAKC,SAAS,CAAC,OAAO,CAACC,KAAK,CAAE,CAAEC,OAAO,CAAE/B,OAAO,CAAG,MAAM,CAAG,MAAO,CAAE,CAAAgC,QAAA,eACnEC,IAAA,QAAKJ,SAAS,CAAC,OAAO,CAACK,OAAO,CAAE5B,eAAgB,CAAA0B,QAAA,CAAC,OAEjD,CAAK,CAAC,cACNJ,KAAA,OAAAI,QAAA,EAAK9B,WAAW,CAACiC,IAAI,CAAC,GAAC,EAAI,CAAC,cAC5BP,KAAA,WACEO,IAAI,CAAC,SAAS,CACdC,EAAE,CAAC,SAAS,CACZC,QAAQ,CAAGC,CAAC,EAAK9B,yBAAyB,CAAC8B,CAAC,CAACC,MAAM,CAACC,KAAK,CAAE,CAAAR,QAAA,eAE3DC,IAAA,WAAAD,QAAA,CAAQ,eAAa,CAAQ,CAAC,CAC7B/B,UAAU,EACTA,UAAU,CAACwC,GAAG,CAAEjB,MAAM,eACpBS,IAAA,WAAyBO,KAAK,CAAEhB,MAAM,CAACb,GAAI,CAAAqB,QAAA,CACxCR,MAAM,CAACkB,KAAK,EADFlB,MAAM,CAACb,GAEZ,CACT,CAAC,EACE,CAAC,EACN,CAAC,CAEV,CAAC,CAED,cAAe,CAAAb,uBAAuB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
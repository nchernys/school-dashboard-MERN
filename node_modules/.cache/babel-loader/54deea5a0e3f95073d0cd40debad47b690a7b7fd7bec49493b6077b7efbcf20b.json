{"ast":null,"code":"import{useState,useEffect}from\"react\";import{Navigate}from\"react-router-dom\";import PopupAddCourseToStudent from\"../components/popupAddCourseToStudent\";import PopupDeleteCourseFromStudent from\"../components/popupDeleteCourseFromStudent\";import PopViewEnrollments from\"../components/viewEnrollments\";import{useStudentsContextHook}from\"../context/hooks/useContextHook\";import{useCoursesContextHook}from\"../context/hooks/useContextHook\";import{useAuthorizeContextHook}from\"../context/hooks/useContextHook\";import{useGlobalRoleContextHook}from\"../context/hooks/useContextHook\";import LoginPage from\"./loginPage\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ManageStudents=()=>{const{authorize,authorizeDispatch}=useAuthorizeContextHook();const{students,studentDispatch}=useStudentsContextHook();const{allCourses,courseDispatch}=useCoursesContextHook();const[error,setError]=useState(null);const[showAdd,setShowAdd]=useState(false);const[showDel,setShowDel]=useState(false);const[thisStudent,setThisStudent]=useState(\"\");const[courseToViewAddDelete,setCourseToViewAddDelete]=useState(\"\");const[viewEnrollments,setViewEnrollments]=useState(false);useEffect(()=>{const fetchStudents=async()=>{const response=await fetch(\"/api/students\");const json=await response.json();if(response.ok){studentDispatch({type:\"SET_STUDENTS\",payload:json});}};fetchStudents();const fetchCourses=async()=>{const response=await fetch(\"/api/courses\");const json=await response.json();if(response.ok){courseDispatch({type:\"SET_COURSES\",payload:json});}};fetchCourses();},[studentDispatch,courseDispatch]);const handleAddCourse=studentId=>{setShowAdd(true);const student=students.find(student=>student._id===studentId);setThisStudent(student);};const handleDelCourse=studentId=>{setShowDel(true);const student=students.find(student=>student._id===studentId);setThisStudent(student);};const handlePopupHide=()=>{setShowAdd(false);setShowDel(false);setViewEnrollments(false);};const handleCourseEnrollments=courseId=>{setViewEnrollments(true);setCourseToViewAddDelete(courseId);};let Num=0;return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Enrollment\"}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"No.\"}),/*#__PURE__*/_jsx(\"td\",{children:\"Names\"}),/*#__PURE__*/_jsx(\"td\",{children:\"Courses\"}),/*#__PURE__*/_jsx(\"td\",{children:\"Add / Drop\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:students&&students.map(student=>{const curNum=++Num;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:curNum}),/*#__PURE__*/_jsx(\"td\",{children:student.name}),/*#__PURE__*/_jsx(\"td\",{children:student.courses.map(course=>/*#__PURE__*/_jsxs(\"span\",{className:\"view-enrollments\",onClick:()=>handleCourseEnrollments(course._id),children:[\" \",course.title,\" \",/*#__PURE__*/_jsx(\"br\",{}),\" \"]},course._id))}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"addCourseBtn\",onClick:()=>handleAddCourse(student._id),children:\"Add\"}),\" \",\"|\",\" \",/*#__PURE__*/_jsx(\"span\",{className:\"delCourseBtn\",onClick:()=>handleDelCourse(student._id),children:\"Drop\"}),\" \"]})]},student._id);})})]}),/*#__PURE__*/_jsx(PopupAddCourseToStudent,{setShowAdd:setShowAdd,showAdd:showAdd,allCourses:allCourses,thisStudent:thisStudent,setCourseToViewAddDelete:setCourseToViewAddDelete,setError:setError,setShowDel:setShowDel,handlePopupHide:handlePopupHide,studentDispatch:studentDispatch}),/*#__PURE__*/_jsx(PopupDeleteCourseFromStudent,{showDel:showDel,setShowDel:setShowDel,thisStudent:thisStudent,setError:setError,setCourseToViewAddDelete:setCourseToViewAddDelete,handlePopupHide:handlePopupHide,studentDispatch:studentDispatch}),/*#__PURE__*/_jsx(PopViewEnrollments,{students:students,allCourses:allCourses,viewEnrollments:viewEnrollments,setViewEnrollments:setViewEnrollments,handlePopupHide:handlePopupHide,setCourseToViewAddDelete:setCourseToViewAddDelete,courseToViewAddDelete:courseToViewAddDelete})]})});};export default ManageStudents;","map":{"version":3,"names":["useState","useEffect","Navigate","PopupAddCourseToStudent","PopupDeleteCourseFromStudent","PopViewEnrollments","useStudentsContextHook","useCoursesContextHook","useAuthorizeContextHook","useGlobalRoleContextHook","LoginPage","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ManageStudents","authorize","authorizeDispatch","students","studentDispatch","allCourses","courseDispatch","error","setError","showAdd","setShowAdd","showDel","setShowDel","thisStudent","setThisStudent","courseToViewAddDelete","setCourseToViewAddDelete","viewEnrollments","setViewEnrollments","fetchStudents","response","fetch","json","ok","type","payload","fetchCourses","handleAddCourse","studentId","student","find","_id","handleDelCourse","handlePopupHide","handleCourseEnrollments","courseId","Num","children","className","map","curNum","name","courses","course","onClick","title"],"sources":["C:/Users/chernysn/Documents/GITHUB_COPIES/MERN_school_dashboard/frontend/src/pages/manageStudents.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { Navigate } from \"react-router-dom\";\r\nimport PopupAddCourseToStudent from \"../components/popupAddCourseToStudent\";\r\nimport PopupDeleteCourseFromStudent from \"../components/popupDeleteCourseFromStudent\";\r\nimport PopViewEnrollments from \"../components/viewEnrollments\";\r\nimport { useStudentsContextHook } from \"../context/hooks/useContextHook\";\r\nimport { useCoursesContextHook } from \"../context/hooks/useContextHook\";\r\nimport { useAuthorizeContextHook } from \"../context/hooks/useContextHook\";\r\nimport { useGlobalRoleContextHook } from \"../context/hooks/useContextHook\";\r\nimport LoginPage from \"./loginPage\";\r\n\r\nconst ManageStudents = () => {\r\n  const { authorize, authorizeDispatch } = useAuthorizeContextHook();\r\n  const { students, studentDispatch } = useStudentsContextHook();\r\n  const { allCourses, courseDispatch } = useCoursesContextHook();\r\n  const [error, setError] = useState(null);\r\n  const [showAdd, setShowAdd] = useState(false);\r\n  const [showDel, setShowDel] = useState(false);\r\n  const [thisStudent, setThisStudent] = useState(\"\");\r\n  const [courseToViewAddDelete, setCourseToViewAddDelete] = useState(\"\");\r\n  const [viewEnrollments, setViewEnrollments] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const fetchStudents = async () => {\r\n      const response = await fetch(\"/api/students\");\r\n      const json = await response.json();\r\n\r\n      if (response.ok) {\r\n        studentDispatch({ type: \"SET_STUDENTS\", payload: json });\r\n      }\r\n    };\r\n\r\n    fetchStudents();\r\n\r\n    const fetchCourses = async () => {\r\n      const response = await fetch(\"/api/courses\");\r\n      const json = await response.json();\r\n\r\n      if (response.ok) {\r\n        courseDispatch({ type: \"SET_COURSES\", payload: json });\r\n      }\r\n    };\r\n\r\n    fetchCourses();\r\n  }, [studentDispatch, courseDispatch]);\r\n\r\n  const handleAddCourse = (studentId) => {\r\n    setShowAdd(true);\r\n    const student = students.find((student) => student._id === studentId);\r\n    setThisStudent(student);\r\n  };\r\n\r\n  const handleDelCourse = (studentId) => {\r\n    setShowDel(true);\r\n    const student = students.find((student) => student._id === studentId);\r\n    setThisStudent(student);\r\n  };\r\n\r\n  const handlePopupHide = () => {\r\n    setShowAdd(false);\r\n    setShowDel(false);\r\n    setViewEnrollments(false);\r\n  };\r\n\r\n  const handleCourseEnrollments = (courseId) => {\r\n    setViewEnrollments(true);\r\n    setCourseToViewAddDelete(courseId);\r\n  };\r\n\r\n  let Num = 0;\r\n\r\n  return (\r\n    <>\r\n      <div className=\"container\">\r\n        <h2>Enrollment</h2>\r\n        <table>\r\n          <thead>\r\n            <tr>\r\n              <td>No.</td>\r\n              <td>Names</td>\r\n              <td>Courses</td>\r\n              <td>Add / Drop</td>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {students &&\r\n              students.map((student) => {\r\n                const curNum = ++Num;\r\n                return (\r\n                  <tr key={student._id}>\r\n                    <td>{curNum}</td>\r\n                    <td>{student.name}</td>\r\n                    <td>\r\n                      {student.courses.map((course) => (\r\n                        <span\r\n                          className=\"view-enrollments\"\r\n                          key={course._id}\r\n                          onClick={() => handleCourseEnrollments(course._id)}\r\n                        >\r\n                          {\" \"}\r\n                          {course.title} <br />{\" \"}\r\n                        </span>\r\n                      ))}\r\n                    </td>\r\n                    <td>\r\n                      <span\r\n                        className=\"addCourseBtn\"\r\n                        onClick={() => handleAddCourse(student._id)}\r\n                      >\r\n                        Add\r\n                      </span>{\" \"}\r\n                      |{\" \"}\r\n                      <span\r\n                        className=\"delCourseBtn\"\r\n                        onClick={() => handleDelCourse(student._id)}\r\n                      >\r\n                        Drop\r\n                      </span>{\" \"}\r\n                    </td>\r\n                  </tr>\r\n                );\r\n              })}\r\n          </tbody>\r\n        </table>\r\n        <PopupAddCourseToStudent\r\n          setShowAdd={setShowAdd}\r\n          showAdd={showAdd}\r\n          allCourses={allCourses}\r\n          thisStudent={thisStudent}\r\n          setCourseToViewAddDelete={setCourseToViewAddDelete}\r\n          setError={setError}\r\n          setShowDel={setShowDel}\r\n          handlePopupHide={handlePopupHide}\r\n          studentDispatch={studentDispatch}\r\n        />\r\n        <PopupDeleteCourseFromStudent\r\n          showDel={showDel}\r\n          setShowDel={setShowDel}\r\n          thisStudent={thisStudent}\r\n          setError={setError}\r\n          setCourseToViewAddDelete={setCourseToViewAddDelete}\r\n          handlePopupHide={handlePopupHide}\r\n          studentDispatch={studentDispatch}\r\n        />\r\n        <PopViewEnrollments\r\n          students={students}\r\n          allCourses={allCourses}\r\n          viewEnrollments={viewEnrollments}\r\n          setViewEnrollments={setViewEnrollments}\r\n          handlePopupHide={handlePopupHide}\r\n          setCourseToViewAddDelete={setCourseToViewAddDelete}\r\n          courseToViewAddDelete={courseToViewAddDelete}\r\n        />\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ManageStudents;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}